create filter if not exists test1 (
        priority='999'
)
execute(
        action='FAIL'
);

insert into mysql.wasm_binary(name,runtime,data,compress_algorithm,hash_before_compress) values('test','test runtime',0x12345611,'test algorithm','test hash');
update mysql.wasm_binary set data = 0x654321 where name ='test';
select count(*) from mysql.wasm_binary;
delete from mysql.wasm_binary where name='test';


alter filter allow_list (
        priority='1000'
);
--error 1105
insert into mysql.wasm_binary(name,runtime,data,compress_algorithm,hash_before_compress) values('test','test runtime',0x12345622,'test algorithm','test hash');
--error 1105
update mysql.wasm_binary set data = 0x654321 where name ='test';
--error 1105
select count(*) from mysql.wasm_binary;
--error 1105
delete from mysql.wasm_binary where name='test';


alter filter allow_list (
        priority='0'
);
insert into mysql.wasm_binary(name,runtime,data,compress_algorithm,hash_before_compress) values('test','test runtime',0x12345644,'test algorithm','test hash');
update mysql.wasm_binary set data = 0x654321 where name ='test';
select count(*) from mysql.wasm_binary;
delete from mysql.wasm_binary where name='test';

drop filter test1;










